<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SurfSki Sverige</title>
<style>
  body {
  font-family: sans-serif;
}

* {
  box-sizing: border-box;
}

audio {position: absolute;
  bottom: 20px;
  left: 10%;
}

video {
  width: 100vw;
  height: 100vh;
  object-fit: cover;
  position: fixed;
  top: 0;
  left: 0;
  z-index: -1;
}

#map {
  position: absolute;
  bottom: 50px;
  right: 50px;
  width: 200px;
  height: 200px;
    border-radius: 50%;
    opacity: 0;
    border: 2px solid white;
}

.e-marker {
  transform-origin: bottom center;
  cursor: pointer;
  
  &__marker {
    fill: #fff;
  }
  
  &__icon {
    fill: #fff;
  }
  
  &__image {
    transform: scale(0);
    transform-origin: 50% 50%;
  }
  
  &__circle {
    display: none;
  }
  
  &__text {
    font-size: 12px;
    font-family: brandon-grotesque, sans-serif;
    text-align: center;
    opacity: 0.5;
    color: #fff;
    fill: #fff;
    transform-origin: 50% 50%;
    // Center SVG text
    alignment-baseline: middle;
    text-anchor: middle;
  }  
}


#play-pause-button {
  font-size: 50px;
  cursor: pointer;
}

</style>
  </head>
  <body>
    <video poster="poster.jpg" autoplay playsinline muted loop>
      <source src="#" type="video/webm">
      <source src="video.mp4" type="video/mp4">
    </video>
    <audio controls>
    <source src="https://521dimensions.com/songs/Ancient Astronauts - Risin' High (feat Raashan Ahmad).mp3" type="audio/mpeg">
    </audio>
    <div id="play-pause-button" class="fa fa-play"></div>
    <div id="map"></div>
  </body>
  <script>
    !function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=37)}([function(t,e,n){"use strict";function r(t){var e=t.length;return function(n){for(var r={},o=s(f(n)),i=0;i<e;i++)r[t[i]]=void 0!==o[i]?parseFloat(o[i]):1;return r}}e.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.splitColorValues=r;var i=function(t){return Object.prototype.toString.call(t).slice(8,-1)},a=/([a-z])([A-Z])/g,s=(e.camelToDash=function(t){return t.replace(a,"$1-$2").toLowerCase()},e.setDOMAttrs=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])},e.splitCommaDelimited=function(t){return l(t)?t.split(/,\s*/):[t]}),u=e.contains=function(t){return function(e){return l(t)&&-1!==e.indexOf(t)}},c=e.isFirstChars=function(t){return function(e){return l(t)&&0===e.indexOf(t)}},f=(e.createUnitType=function(t,e){return{test:u(t),parse:parseFloat,transform:e}},e.getValueFromFunctionString=function(t){return t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))}),l=(e.isArray=function(t){return"Array"===i(t)},e.isFunc=function(t){return"Function"===i(t)},e.isNum=function(t){return"number"==typeof t},e.isObj=function(t){return"object"===(void 0===t?"undefined":o(t))},e.isString=function(t){return"string"==typeof t}),p=e.isHex=c("#"),h=e.isRgb=c("rgb"),d=e.isHsl=c("hsl");e.isColor=function(t){return p(t)||h(t)||d(t)}},function(t,e,n){"use strict";function r(){u||(u=!0,i.default(o))}function o(t){u=!1,l=Math.max(Math.min(t-f,c),1)*p,f=t,h.process(),d.process(),v.process(),y.process()}Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),a=n(20),s="undefined"!=typeof performance&&performance.now;e.currentTime=s?function(){return performance.now()}:function(){return(new Date).getTime()};var u=!1,c=20,f=e.currentTime(),l=0,p=1,h=a.default(r),d=a.default(r),v=a.default(r),y=a.default(r);e.onFrameStart=h.schedule,e.onFrameUpdate=d.schedule,e.onFrameRender=v.schedule,e.onFrameEnd=y.schedule,e.cancelOnFrameStart=h.cancel,e.cancelOnFrameUpdate=d.cancel,e.cancelOnFrameRender=v.cancel,e.cancelOnFrameEnd=y.cancel,e.timeSinceLastFrame=function(){return l},e.currentFrameTime=function(){return f}},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(1),s=n(3),u=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this.scheduledUpdate=function(){e.lastUpdated=(0,a.timeSinceLastFrame)(),e.prev=e.current;var t=e.props,n=t.onUpdate,r=t.passive;return e.update&&(e.current=e.update(e.current)),n&&(n.registerAction?n.set(e.get()):n(e.get(),e)),e.fireListeners(),!r&&e._isActive&&(0,a.onFrameUpdate)(e.scheduledUpdate),e.isActionComplete&&e.isActionComplete()&&e.complete(),e},this.props=i({},this.constructor.defaultProps),this.setProps(n),this.lastUpdated=0,this.prev=this.current=n.current||n.from||0}return t.prototype.start=function(){var t=this.props,e=t.onStart,n=t._onStart;return t.passive||(this._isActive=!0,(0,a.onFrameUpdate)(this.scheduledUpdate)),this.onStart&&this.onStart(),e&&e(this),n&&n(this),this},t.prototype.stop=function(){var t=this.props,e=t.onStop,n=t._onStop;return t.passive||(this._isActive=!1,(0,a.cancelOnFrameUpdate)(this.scheduledUpdate)),this.onStop&&this.onStop(),e&&e(this),n&&n(this),this},t.prototype.complete=function(){var t=this.props,e=t.onComplete,n=t._onComplete;return this.stop(),this.onComplete&&this.onComplete(),e&&e(this),n&&n(this),this},t.prototype.setProps=function(t){var e=t.onUpdate,n=r(t,["onUpdate"]);return this.props=i({},this.props,n),e&&this.output(e),this},t.prototype.output=function(t){return this.props.onUpdate=t,t.registerAction&&t.registerAction(this),this},t.prototype.get=function(){var t=this.props.transform;return t?t(this.current):this.current},t.prototype.getBeforeTransform=function(){return this.current},t.prototype.set=function(t){return this.current=t,this},t.prototype.getProp=function(t){return this.props[t]},t.prototype.getVelocity=function(){return(0,s.speedPerSecond)(this.current-this.prev,this.lastUpdated)},t.prototype.isActive=function(){return this._isActive},t.prototype.addListener=function(t){return this.listeners=this.listeners||[],this.numListeners=this.numListeners||0,-1===this.listeners.indexOf(t)&&(this.listeners.push(t),this.numListeners++),this},t.prototype.removeListener=function(t){var e=this.listeners?this.listeners.indexOf(t):-1;return-1!==e&&(this.numListeners--,this.listeners.splice(e,1)),this},t.prototype.fireListeners=function(){for(var t=this.get(),e=0;e<this.numListeners;e++)this.listeners[e](t,this);return this},t}();e.default=u},function(t,e,n){"use strict";e.__esModule=!0,e.stepProgress=e.speedPerSecond=e.speedPerFrame=e.smooth=e.radiansToDegrees=e.pointFromAngleAndDistance=e.getValueFromProgress=e.getProgressFromValue=e.distance=e.dilate=e.degreesToRadians=e.angle=void 0;var r=n(0),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e=Math.pow(10,e),Math.round(t*e)/e},i={x:0,y:0,z:0},a=function(t,e){return Math.abs(t-e)},s=(e.angle=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return u(Math.atan2(e.y-t.y,e.x-t.x))},e.degreesToRadians=function(t){return t*Math.PI/180}),u=(e.dilate=function(t,e,n){return t+(e-t)*n},e.distance=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if((0,r.isNum)(t))return a(t,e);var n=a(t.x,e.x),o=a(t.y,e.y),s=(0,r.isNum)(t.z)?a(t.z,e.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2)+Math.pow(s,2))},e.getProgressFromValue=function(t,e,n){return(n-t)/(e-t)},e.getValueFromProgress=function(t,e,n){return-n*t+n*e+t},e.pointFromAngleAndDistance=function(t,e,n){return e=s(e),{x:n*Math.cos(e)+t.x,y:n*Math.sin(e)+t.y}},e.radiansToDegrees=function(t){return 180*t/Math.PI});e.smooth=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return o(e+n*(t-e)/Math.max(r,n))},e.speedPerFrame=function(t,e){return(0,r.isNum)(t)?t/(1e3/e):0},e.speedPerSecond=function(t,e){return e?t*(1e3/e):0},e.stepProgress=function(t,e){var n=1/(t-1),r=1-1/t,o=Math.min(e/r,1);return Math.floor(o/n)*n}},function(t,e,n){"use strict";e.__esModule=!0,e.bezier=e.blendColor=e.alpha=e.color=e.hsla=e.rgba=e.rgbUnit=e.px=e.degrees=e.percent=e.transformChildValues=e.steps=e.snap=e.smooth=e.wrap=e.nonlinearSpring=e.spring=e.generateNonIntergratedSpring=e.multiply=e.divide=e.add=e.subtract=e.interpolate=e.flow=e.pipe=e.conditional=e.clamp=e.clampMin=e.clampMax=e.applyOffset=e.appendUnit=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(3),i=n(0),a=n(14),s=n(1),u=function(t){return t},c=e.appendUnit=function(t){return function(e){return""+e+t}},f=(e.applyOffset=function(t,e){var n=d(t),r=v(e);return function(t){return r(n(t))}},e.clampMax=function(t){return function(e){return Math.min(e,t)}}),l=e.clampMin=function(t){return function(e){return Math.max(e,t)}},p=e.clamp=function(t,e){var n=l(t),r=f(e);return function(t){return n(r(t))}},h=(e.conditional=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return function(r,o){return t(r,o)?e(r,o):n(r,o)}},e.pipe=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.length,o=0;return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=t;for(o=0;o<r;o++)s=e[o].apply(e,[s].concat(i));return s}}),d=(e.flow=h,e.interpolate=function(t,e,n){var r=t.length,i=r-1;return function(a){if(a<=t[0])return e[0];if(a>=t[i])return e[i];for(var s=1;s<r&&!(t[s]>a||s===i);s++);var u=(0,o.getProgressFromValue)(t[s-1],t[s],a),c=n?n[s-1](u):u;return(0,o.getValueFromProgress)(e[s-1],e[s],c)}},e.subtract=function(t){return function(e){return e-t}}),v=e.add=function(t){return function(e){return e+t}},y=(e.divide=function(t){return function(e){return e/t}},e.multiply=function(t){return function(e){return e*t}},e.generateNonIntergratedSpring=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return function(e,n){return function(r){var o=n-r,i=-e*(0-t(Math.abs(o)));return o<=0?n+i:n-i}}}),m=(e.spring=y(),e.nonlinearSpring=y(Math.sqrt),e.wrap=function(t,e){return function(n){var r=e-t;return((n-t)%r+r)%r+t}},e.smooth=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=0,n=0;return function(r){var i=(0,s.currentFrameTime)(),a=i!==n?i-n:0,u=a?(0,o.smooth)(r,e,a,t):e;return n=i,e=u,u}},e.snap=function(t){if("number"==typeof t)return function(e){return Math.round(e/t)*t};var e=0,n=t.length;return function(r){var o=Math.abs(t[0]-r);for(e=1;e<n;e++){var i=t[e],a=Math.abs(i-r);if(0===a)return i;if(a>o)return t[e-1];if(e===n-1)return i;o=a}}},e.steps=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"start";return function(i){var a=(0,o.getProgressFromValue)(e,n,i);return(0,o.getValueFromProgress)(e,n,(0,o.stepProgress)(t,a,r))}},e.transformChildValues=function(t){var e={};return function(n){for(var r in n){var o=t[r];o&&(e[r]=o(n[r]))}return e}}),g=e.percent=c("%"),b=(e.degrees=c("deg"),e.px=c("px"),e.rgbUnit=h(p(0,255),Math.round)),O=function(t){var e=t.red,n=t.green,r=t.blue,o=t.alpha;return"rgba("+e+", "+n+", "+r+", "+(void 0===o?1:o)+")"},w=e.rgba=h(m({red:b,green:b,blue:b,alpha:M}),O),_=function(t){var e=t.hue,n=t.saturation,r=t.lightness,o=t.alpha;return"hsla("+e+", "+n+", "+r+", "+(void 0===o?1:o)+")"},P=e.hsla=h(m({hue:parseInt,saturation:g,lightness:g,alpha:M}),_),M=(e.color=function(t){return t.hasOwnProperty("red")?w(t):t.hasOwnProperty("hue")?P(t):t},e.alpha=p(0,1)),x=function(t,e,n){var r=t*t,o=e*e;return Math.sqrt(n*(o-r)+r)},j=(e.blendColor=function(t,e){var n=(0,i.isString)(t)?(0,a.color)(t):t,s=(0,i.isString)(e)?(0,a.color)(e):e,u=r({},n);return function(t){for(var e in u)u[e]=x(n[e],s[e],t);return u.red=x(n.red,s.red,t),u.green=x(n.green,s.green,t),u.blue=x(n.blue,s.blue,t),u.alpha=(0,o.getValueFromProgress)(n.alpha,s.alpha,t),u}},function(t){return function(e){var n=1-e;return(t[0]*n+t[1]*e)*n+(t[1]*n+t[2]*e)*e}}),E=function(t){return function(e){var n=1-e,r=t[1]*n+t[2]*e;return((t[0]*n+t[1]*e)*n+r*e)*n+(r*n+(t[2]*n+t[3]*e)*e)*e}};e.bezier=function(t){return 3===t.length?j(t):E(t)}},function(t,e,n){"use strict";e.__esModule=!0,e.complex=e.color=e.hsla=e.hex=e.rgba=e.rgbUnit=e.scale=e.px=e.percent=e.degrees=e.alpha=e.number=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(4),i=n(14),a=n(0),s=e.number={test:a.isNum,parse:parseFloat},u=(e.alpha=r({},s,{transform:o.alpha}),e.degrees=(0,a.createUnitType)("deg",o.degrees),e.percent=(0,a.createUnitType)("%",o.percent),e.px=(0,a.createUnitType)("px",o.px),e.scale=r({},s,{default:1}),e.rgbUnit=r({},s,{transform:o.rgbUnit}),e.rgba={test:a.isRgb,parse:i.rgba,transform:o.rgba}),c=(e.hex=r({},u,{test:a.isHex,parse:i.hex}),e.hsla={test:a.isHsl,parse:i.hsla,transform:o.hsla},e.color={parse:i.color,test:a.isColor,transform:o.color},/(-)?(\d[\d\.]*)/g),f=function(t){return"${"+t+"}"};e.complex={test:function(t){var e=t.match&&t.match(c);return(0,a.isArray)(e)&&e.length>1},parse:function(t){var e={};return t.match(c).forEach(function(t,n){return e[n]=parseFloat(t)}),e},createTransformer:function(t){var e=0,n=t.replace(c,function(){return f(e++)});return function(t){var e=n;for(var r in t)t.hasOwnProperty(r)&&(e=e.replace(f(r),t[r]));return e}}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(2),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(1),c=n(4),f=n(3),l=n(10),p=(0,c.clamp)(0,1),h={loop:function(t){return t.start()},yoyo:function(t){return t.reverse().start()},flip:function(t){return t.flip().start()}},d=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.onStart=function(){var t=this.props,e=t.duration,n=t.playDirection;this.elapsed=1===n?0:e,this.progress=0},e.prototype.update=function(){var t=this.props,e=t.duration,n=t.ease,r=t.from,o=t.to,i=t.playDirection;return this.isManualUpdate||(this.elapsed+=(0,u.timeSinceLastFrame)()*i),this.isManualUpdate=!1,this.progress=p((0,f.getProgressFromValue)(0,e,this.elapsed)),(0,f.getValueFromProgress)(r,o,n(this.progress))},e.prototype.isActionComplete=function(){var t=this.props,e=t.duration,n=t.playDirection,r=t.yoyo,o=t.loop,i=t.flip,a=1===n?this.elapsed>=e:this.elapsed<=0;if(a&&(r||o||i)){var s=!1;for(var u in h){var c=h[u],f=u+"Count",l=this.getProp(u),p=this.getProp(f);if(l>p){var d;this.setProps((d={},d[f]=p+1,d)),c(this),s=!0}}s&&(a=!1)}return a},e.prototype.getElapsed=function(){return this.elapsed},e.prototype.flip=function(){this.elapsed=this.props.duration-this.elapsed;var t=[this.props.to,this.props.from];return this.props.from=t[0],this.props.to=t[1],this},e.prototype.reverse=function(){return this.props.playDirection*=-1,this},e.prototype.seek=function(t){var e=this.props.duration;this.elapsed=(0,f.getValueFromProgress)(0,e,t),this.isManualUpdate=!0,this.isActive()||this.scheduledUpdate()},e}(s.default);d.defaultProps={duration:300,ease:l.easeOut,from:0,to:1,flip:0,flipCount:0,yoyo:0,yoyoCount:0,loop:0,loopCount:0,playDirection:1},e.default=function(t){return new d(t)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(1),a=n(0),s=function(){function t(e){r(this,t),this.render=this.render.bind(this),this.props=o({},this.constructor.defaultProps,e),this.state={},this.changedValues=[]}return t.prototype.get=function(t){return t?void 0!==this.state[t]?this.state[t]:this.read(t):this.state},t.prototype.read=function(t){if(this.onRead)return this.onRead(t)},t.prototype.set=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(void 0===e[1]){var r=e[0];for(var o in r)this.setValue(o,r[o])}else{var a=e[0],s=e[1];this.setValue(a,s)}return this.hasChanged&&(0,i.onFrameRender)(this.render),this},t.prototype.setValue=function(t,e){var n=this.state[t];if((0,a.isNum)(e)||(0,a.isString)(e))n!==e&&(this.state[t]=e,this.hasChanged=!0);else if((0,a.isArray)(e)){n||(this.state[t]=[]);for(var r=e.length,o=0;o<r;o++)this.state[t][o]!==e[o]&&(this.state[t][o]=e[o],this.hasChanged=!0)}else if((0,a.isObj)(e)){n||(this.state[t]={});for(var i in e)this.state[t][i]!==e[i]&&(this.state[t][i]=e[i],this.hasChanged=!0)}this.hasChanged&&-1===this.changedValues.indexOf(t)&&this.changedValues.push(t)},t.prototype.render=function(){return(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.hasChanged)&&this.onRender&&this.onRender(),this.changedValues.length=0,this.hasChanged=!1,this},t}();e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=["X","Y","Z"],o={x:!0,y:!0,z:!0},i=["translate","scale","rotate","skew","transformPerspective"];o.rotate=o.scale=o.transformPerspective=!0,i.forEach(function(t){return r.forEach(function(e){return o[t+e]=!0})}),e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.__esModule=!0,e.svgPath=e.svg=e.css=e.Renderer=e.value=e.spring=e.stagger=e.tween=e.trackOffset=e.touches=e.pointer=e.physics=e.parallel=e.delay=e.crossFade=e.composite=e.colorTween=e.chain=e.Action=e.valueTypes=e.transform=e.easing=e.calc=e.currentFrameTimestamp=e.timeSinceLastFrame=e.cancelOnFrameEnd=e.cancelOnFrameRender=e.cancelOnFrameUpdate=e.cancelOnFrameStart=e.onFrameEnd=e.onFrameRender=e.onFrameUpdate=e.onFrameStart=void 0;var i=n(1);Object.defineProperty(e,"onFrameStart",{enumerable:!0,get:function(){return i.onFrameStart}}),Object.defineProperty(e,"onFrameUpdate",{enumerable:!0,get:function(){return i.onFrameUpdate}}),Object.defineProperty(e,"onFrameRender",{enumerable:!0,get:function(){return i.onFrameRender}}),Object.defineProperty(e,"onFrameEnd",{enumerable:!0,get:function(){return i.onFrameEnd}}),Object.defineProperty(e,"cancelOnFrameStart",{enumerable:!0,get:function(){return i.cancelOnFrameStart}}),Object.defineProperty(e,"cancelOnFrameUpdate",{enumerable:!0,get:function(){return i.cancelOnFrameUpdate}}),Object.defineProperty(e,"cancelOnFrameRender",{enumerable:!0,get:function(){return i.cancelOnFrameRender}}),Object.defineProperty(e,"cancelOnFrameEnd",{enumerable:!0,get:function(){return i.cancelOnFrameEnd}}),Object.defineProperty(e,"timeSinceLastFrame",{enumerable:!0,get:function(){return i.timeSinceLastFrame}}),Object.defineProperty(e,"currentFrameTimestamp",{enumerable:!0,get:function(){return i.currentFrameTime}});var a=n(3),s=o(a),u=n(10),c=o(u),f=n(4),l=o(f),p=n(5),h=o(p),d=n(2),v=r(d),y=n(15),m=r(y),g=n(21),b=r(g),O=n(11),w=r(O),_=n(22),P=r(_),M=n(16),x=r(M),j=n(12),E=r(j),S=n(23),F=r(S),C=n(24),T=r(C),A=n(25),U=r(A),R=n(26),L=r(R),V=n(6),D=r(V),k=n(27),I=r(k),X=n(28),Y=r(X),z=n(13),B=r(z),N=n(7),Z=r(N),q=n(29),H=r(q),K=n(31),$=r(K),W=n(34),G=r(W);e.calc=s,e.easing=c,e.transform=l,e.valueTypes=h,e.Action=v.default,e.chain=m.default,e.colorTween=b.default,e.composite=w.default,e.crossFade=P.default,e.delay=x.default,e.parallel=E.default,e.physics=F.default,e.pointer=T.default,e.touches=U.default,e.trackOffset=L.default,e.tween=D.default,e.stagger=I.default,e.spring=Y.default,e.value=B.default,e.Renderer=Z.default,e.css=H.default,e.svg=$.default,e.svgPath=G.default},function(t,e,n){"use strict";e.__esModule=!0,e.cubicBezier=e.anticipate=e.createAnticipateEasing=e.backInOut=e.backOut=e.backIn=e.createBackIn=e.circInOut=e.circOut=e.circIn=e.easeInOut=e.easeOut=e.easeIn=e.createExpoIn=e.linear=e.createMirroredEasing=e.createReversedEasing=void 0;var r=n(4),o=e.createReversedEasing=function(t){return function(e){return 1-t(1-e)}},i=e.createMirroredEasing=function(t){return function(e){return e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2}},a=(e.linear=function(t){return t},e.createExpoIn=function(t){return function(e){return Math.pow(e,t)}}),s=e.easeIn=a(2),u=(e.easeOut=o(s),e.easeInOut=i(s),e.circIn=function(t){return 1-Math.sin(Math.acos(t))}),c=e.circOut=o(u),f=(e.circInOut=i(c),e.createBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}}),l=e.backIn=f(1.525),p=(e.backOut=o(l),e.backInOut=i(l),e.createAnticipateEasing=function(t){var e=f(t);return function(t){return(t*=2)<1?.5*e(t):.5*(2-Math.pow(2,-10*(t-1)))}});e.anticipate=p(1.525),e.cubicBezier=function(t,e,n,o){var i=(0,r.bezier)(0,t,n,1),a=(0,r.bezier)(0,e,o,1);return function(t){return a(i(t))}}},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=n(2),c=function(t){return t&&t.__esModule?t:{default:t}}(u),f=n(1),l=function(t){function e(n){o(this,e);var a=n.actions,s=r(n,["actions"]),u=i(this,t.call(this,s));return u.current={},u.actionKeys=[],u.addActions(a),u}return a(e,t),e.prototype.addActions=function(t){var e=this;for(var n in t)!function(n){-1===e.actionKeys.indexOf(n)&&e.actionKeys.push(n),e[n]=t[n];var r=function(t){e.current[n]=t,(0,f.onFrameUpdate)(e.scheduledUpdate)};e[n].setProps({_onStop:function(){return e.numActiveActions--}}).addListener(r)}(n)},e.prototype.onStart=function(){var t=this;this.numActiveActions=this.actionKeys.length,this.actionKeys.forEach(function(e){return t[e].start()})},e.prototype.onStop=function(){var t=this;this.actionKeys.forEach(function(e){return t[e].stop()})},e.prototype.getVelocity=function(){var t=this,e={};return this.actionKeys.forEach(function(n){return e[n]=t[n].getVelocity()}),e},e.prototype.isActionComplete=function(){return 0===this.numActiveActions},e}(c.default);l.defaultProps={passive:!0},e.default=function(t,e){return new l(s({actions:t},e))}},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=n(2),c=function(t){return t&&t.__esModule?t:{default:t}}(u),f=n(1),l=function(t){function e(n){o(this,e);var a=n.actions,s=r(n,["actions"]),u=i(this,t.call(this,s));return u.actions=[],u.current=[],u.addActions(a),u}return a(e,t),e.prototype.addAction=function(t){var e=this;if(-1===this.actions.indexOf(t)){this.actions.push(t);var n=this.actions.length-1,r=function(t){e.current[n]=t,(0,f.onFrameUpdate)(e.scheduledUpdate)};r(t.get()),t.setProps({_onStop:function(){return e.numActiveActions--}}).addListener(r)}},e.prototype.addActions=function(t){var e=this;t.forEach(function(t){return e.addAction(t)})},e.prototype.onStart=function(){this.numActiveActions=this.actions.length,this.actions.forEach(function(t){return t.start()})},e.prototype.onStop=function(){this.actions.forEach(function(t){return t.stop()})},e.prototype.getVelocity=function(){return this.actions.map(function(t){return t.getVelocity()})},e.prototype.isActionComplete=function(){return 0===this.numActiveActions},e.prototype.getChildren=function(){return this.actions},e}(c.default);e.default=function(t,e){return new l(s({actions:t},e))}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(2),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(1),c=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.set=function(t){return this.toUpdate=t,(0,u.onFrameUpdate)(this.scheduledUpdate),t},e.prototype.update=function(){return void 0!==this.toUpdate?this.toUpdate:this.current},e.prototype.stopRegisteredAction=function(){this.action&&this.action.isActive()&&this.action.stop(),this.action=void 0},e.prototype.registerAction=function(t){return this.stopRegisteredAction(),this.action=t,this},e.prototype.onStop=function(){this.stopRegisteredAction()},e}(s.default);c.defaultProps={passive:!0},e.default=function(t,e){return new c({current:t,onUpdate:e})}},function(t,e,n){"use strict";e.__esModule=!0,e.color=e.hsla=e.rgba=e.hex=void 0;var r=n(0),o=e.hex=function(t){var e=void 0,n=void 0,r=void 0;return t.length>4?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),e+=e,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}},i=e.rgba=(0,r.splitColorValues)(["red","green","blue","alpha"]),a=e.hsla=(0,r.splitColorValues)(["hue","saturation","lightness","alpha"]);e.color=function(t){return(0,r.isRgb)(t)?i(t):(0,r.isHex)(t)?o(t):(0,r.isHsl)(t)?a(t):t}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(2),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(){var n,i,a;r(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=i=o(this,t.call.apply(t,[this].concat(u))),i.playNext=function(){var t=i.props;t.i<t.order.length-1?(i.props.i++,i.playCurrent()):i.complete()},a=n,o(i,a)}return i(e,t),e.prototype.onStart=function(){this.props.i=0,this.playCurrent()},e.prototype.playCurrent=function(){var t=this.props,e=t.i,n=t.order;n[e].props._onComplete=this.playNext,n[e].start()},e.prototype.onStop=function(){var t=this.props,e=t.i;t.order[e].stop()},e}(s.default);e.default=function(t,e){return new u({order:t,onComplete:e})}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(6),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){return(0,o.default)({duration:t,onComplete:e})}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5);e.default={color:r.color,backgroundColor:r.color,outlineColor:r.color,fill:r.color,stroke:r.color,borderColor:r.color,borderTopColor:r.color,borderRightColor:r.color,borderBottomColor:r.color,borderLeftColor:r.color,borderRadius:r.px,width:r.px,height:r.px,top:r.px,left:r.px,bottom:r.px,right:r.px,rotate:r.degrees,rotateX:r.degrees,rotateY:r.degrees,rotateZ:r.degrees,scale:r.scale,scaleX:r.scale,scaleY:r.scale,scaleZ:r.scale,skewX:r.degrees,skewY:r.degrees,distance:r.px,translateX:r.px,translateY:r.px,translateZ:r.px,perspective:r.px,opacity:r.alpha}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(0),o={},i={},a=["Webkit","Moz","O","ms",""],s=a.length,u=void 0,c=function(t){u=u||document.createElement("div");for(var e=0;e<s;e++){var n=a[e],c=""===n,f=c?t:n+t.charAt(0).toUpperCase()+t.slice(1);f in u.style&&(o[t]=f,i[t]=(c?"":"-")+(0,r.camelToDash)(f))}};e.default=function(t,e){var n=e?i:o;return n[t]||c(t),n[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=!("undefined"==typeof window||!window.requestAnimationFrame);if(o)r=function(t){return window.requestAnimationFrame(t)};else{var i=0;r=function(t){var e=(new Date).getTime(),n=Math.max(0,16.7-(e-i));i=e+n,setTimeout(function(){return t(i)},n)}}e.default=r},function(t,e,n){"use strict";function r(t){var e=[],n=[];return{schedule:function(e){t(),-1===n.indexOf(e)&&n.push(e)},cancel:function(t){var e=n.indexOf(t);-1!==e&&n.splice(e,1)},process:function(){o=[n,e],e=o[0],n=o[1],n.length=0;for(var t=e.length,r=0;r<t;r++)e[r]();var o}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(6),a=function(t){return t&&t.__esModule?t:{default:t}}(i),s=n(4),u=n(5);e.default=function(t){var e=t.from,n=t.to,i=r(t,["from","to"]);return(0,a.default)(o({},i,{from:0,to:1,transform:(0,s.pipe)((0,s.blendColor)(e,n),u.color.transform)}))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(2),u=r(s),c=n(6),f=r(c),l=n(10),p=n(3),h=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return a(e,t),e.prototype.onStart=function(){var t=this.props,e=t.duration,n=t.ease,r=t.fader;this.fader=r||(0,f.default)({to:1,duration:e,ease:n}).start()},e.prototype.update=function(){var t=this.props,e=t.from,n=t.to,r=this.fader.get(),o=e.get(),i=n.get();return(0,p.getValueFromProgress)(o,i,r)},e}(u.default);h.defaultProps={ease:l.linear},e.default=function(t){return new h(t)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(2),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(1),c=n(3),f=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.update=function(){var t=this.props,e=t.autoStopSpeed,n=t.acceleration,r=t.friction,o=t.velocity,i=t.spring,a=t.to,s=o,f=(0,u.timeSinceLastFrame)();if(n&&(s+=(0,c.speedPerFrame)(n,f)),r&&(s*=Math.pow(1-r,f/100)),i&&void 0!==a){s+=(a-this.current)*(0,c.speedPerFrame)(i,f)}return this.current+=(0,c.speedPerFrame)(s,f),this.props.velocity=s,this.isComplete=!1!==e&&(!s||Math.abs(s)<=e),this.isComplete&&i&&(this.current=a),this.current},e.prototype.isActionComplete=function(){return this.isComplete},e}(s.default);f.defaultProps={acceleration:0,friction:0,velocity:0,autoStopSpeed:.001},e.default=function(t){return new f(t)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){var n=t.x,r=t.y,i=e.eventToPoints,s=e.moveEvent,c=o(e,["eventToPoints","moveEvent"]),l=(0,f.default)({x:(0,u.default)(n),y:(0,u.default)(r)},a({preventDefault:!0},c)),p=function(t){l.getProp("preventDefault")&&t.preventDefault();var e=i(t);l.x.set(e.x),l.y.set(e.y)};return l.setProps({_onStart:function(){return document.documentElement.addEventListener(s,p,{passive:!l.getProp("preventDefault")})},_onStop:function(){return document.documentElement.removeEventListener(s,p)}}),l}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(13),u=r(s),c=n(11),f=r(c),l=function(t){return{x:t.clientX,y:t.clientY}},p=function(t){var e=t.changedTouches;return{x:e[0].clientX,y:e[0].clientY}},h=function(t){return t.originalEvent||t.nativeEvent||t};e.default=function(t,e){return h(t).touches?i(p(t),a({moveEvent:"touchmove",eventToPoints:p},e)):i(l(t),a({moveEvent:"mousemove",eventToPoints:l},e))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){function n(t){u.preventDefault&&t.preventDefault();var e=r(t);s(f,e)}var r=e.eventToTouches,i=e.moveEvent,u=o(e,["eventToTouches","moveEvent"]),f=(0,v.default)(a(t),c({preventDefault:!0},u));return f.setProps({_onStart:function(){return document.documentElement.addEventListener(i,n)},_onStop:function(){return document.documentElement.removeEventListener(i,n)}}),f}function a(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],o=r.x,i=r.y;e[n]=(0,h.default)({x:(0,l.default)(o),y:(0,l.default)(i)})}return e}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n],o=r.x,i=r.y,a=t.getChildren(),s=a[n];void 0!==s?(s.x.set(o),s.y.set(i)):t.addAction((0,h.default)({x:(0,l.default)(o),y:(0,l.default)(i)}))}}function u(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],o=r.clientX,i=r.clientY;e[n]={x:o,y:i}}return e}e.__esModule=!0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f=n(13),l=r(f),p=n(11),h=r(p),d=n(12),v=r(d),y=function(t){return[{x:t.pageX,y:t.pageY}]},m=function(t){return u(t.touches)},g=function(t){return t.originalEvent||t.nativeEvent||t};e.default=function(t,e){return g(t).touches?i(m(t),c({moveEvent:"touchmove",eventToTouches:m},e)):i(y(t),c({moveEvent:"mousemove",eventToTouches:y},e))}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(2),u=function(t){return t&&t.__esModule?t:{default:t}}(s),c=n(4),f=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.onStart=function(){var t=this.props.action;this.applyOffset=(0,c.applyOffset)(t.get(),this.current)},e.prototype.update=function(){var t=this.props.action;return this.applyOffset(t.get())},e}(u.default);e.default=function(t,e){return new f(a({action:t},e))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(15),i=r(o),a=n(12),s=r(a),u=n(16),c=r(u),f=n(0);e.default=function(t,e,n){var r=(0,f.isFunc)(e);return(0,s.default)(t.map(function(t,n){var o=r?e(n):n*e;return(0,i.default)([(0,c.default)(o),t])}),{onComplete:n})}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(2),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(1),c=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.onStart=function(){var t=this.props,e=t.velocity,n=t.to,r=t.from;this.t=0,this.initialVelocity=e?e/1e3:0,this.isComplete=!1,this.delta=n-r},e.prototype.update=function(){var t=this.props,e=t.stiffness,n=t.damping,r=t.mass,o=t.from,i=t.to,a=t.restSpeed,s=t.restDisplacement,c=this.delta,f=this.initialVelocity,l=(0,u.timeSinceLastFrame)()/1e3,p=this.t=this.t+l,h=n/(2*Math.sqrt(e*r)),d=Math.sqrt(e/r),v=d*Math.sqrt(1-h*h),y=0;if(h<1){var m=Math.exp(-h*d*p);y=m*((f+h*d*1)/v*Math.sin(v*p)+1*Math.cos(v*p)),this.velocity=m*(Math.cos(v*p)*(f+h*d*1)-1*v*Math.sin(v*p))-h*d*m*(Math.sin(v*p)*(f+h*d*1)/v+1*Math.cos(v*p))}else{var g=Math.exp(-d*p);y=g*(1+(f+1*d)*p),this.velocity=g*(p*f*d-1*p*(d*d)+f)}var b=1-y,O=o+b*c,w=Math.abs(this.velocity)<=a,_=Math.abs(i-O)<=s;return this.isComplete=w&&_,this.isComplete&&(O=i),O},e.prototype.isActionComplete=function(){return this.isComplete},e}(s.default);c.defaultProps={stiffness:100,damping:10,mass:1,velocity:0,from:0,to:0,restSpeed:.01,restDisplacement:.01},e.default=function(t){return new c(t)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t,e){return new g(s({element:t,enableHardwareAcceleration:!0},e))};var u=n(7),c=r(u),f=n(30),l=r(f),p=n(8),h=r(p),d=n(17),v=r(d),y=n(18),m=r(y),g=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return a(e,t),e.prototype.onRender=function(){var t=this.props,e=t.element,n=t.enableHardwareAcceleration;(0,l.default)(e,this.state,this.changedValues,n)},e.prototype.onRead=function(t){var e=v.default[t];if(h.default[t])return e?e.default||0:0;var n=this.props.element,r=window.getComputedStyle(n,null)[(0,m.default)(t)]||0;return e&&e.parse?e.parse(r):r},e}(c.default)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return j.indexOf(t)-j.indexOf(e)}function i(t,e,n,r){for(var i="",a="",u=!1,f=!1,h=n.length,d=0;d<h;d++){var v=n[d];if(s.default[v]){u=!0;for(var y in e)s.default[y]&&-1===n.indexOf(y)&&n.push(y);break}}n.sort(o);for(var m=n.length,g=0;g<m;g++){var b=n[g],O=e[b];x[b]&&(b=x[b]),c.default[b]&&((0,p.isNum)(O)||(0,p.isObj)(O))&&c.default[b].transform&&(O=c.default[b].transform(O)),s.default[b]?(a+=b+"("+O+") ",f=b===x.z||f):i+=";"+(0,l.default)(b,!0)+":"+O}u&&(!f&&r&&(a+=x.z+"(0)"),i+=";"+(0,l.default)("transform",!0)+":"+a),t.style.cssText+=i}e.__esModule=!0,e.default=i;var a=n(8),s=r(a),u=n(17),c=r(u),f=n(18),l=r(f),p=n(0),h=s.default.translate,d=s.default.translateX,v=s.default.translateY,y=s.default.translateZ,m=s.default.scale,g=s.default.scaleX,b=s.default.scaleY,O=s.default.scaleZ,w=s.default.rotate,_=s.default.rotateX,P=s.default.rotateY,M=s.default.rotateZ,x={x:"translateX",y:"translateY",z:"translateZ"},j=[h,d,v,y,m,g,b,O,w,_,P,M]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t,e){return new m(s({element:t},e))};var u=n(7),c=r(u),f=n(32),l=r(f),p=n(8),h=r(p),d=n(33),v=r(d),y=n(0),m=function(t){function e(n){o(this,e);var r=i(this,t.call(this,n)),a=n.element.getBBox(),s=a.x,u=a.y,c=a.width,f=a.height;return r.elementDimensions={x:s,y:u,width:c,height:f},r}return a(e,t),e.prototype.onRender=function(){var t=this.props.element,e=(0,l.default)(this.state,this.elementDimensions);(0,y.setDOMAttrs)(t,e)},e.prototype.onRead=function(t){var e=this.props.element;if(h.default[t]){var n=v.default[t];return n?n.default:0}return e.getAttribute(t)},e}(c.default)},function(t,e,n){"use strict";function r(t,e){var n=!1,r={},i=void 0!==t.scale?t.scale||s:t.scaleX||1,u=void 0!==t.scaleY?t.scaleY||s:i||1,c=e.width*((t.originX||50)/100)+e.x,f=e.height*((t.originY||50)/100)+e.y,l=1*i*-c,p=1*u*-f,h=c/i,d=f/u,v={translate:"translate("+t.translateX+", "+t.translateY+") ",scale:"translate("+l+", "+p+") scale("+i+", "+u+") translate("+h+", "+d+") ",rotate:"rotate("+t.rotate+", "+c+", "+f+") ",skewX:"skewX("+t.skewX+") ",skewY:"skewY("+t.skewY+") "};for(var y in t)t.hasOwnProperty(y)&&(a.default[y]?n=!0:r[(0,o.camelToDash)(y)]=t[y]);if(n){r.transform="";for(var m in v)if(v.hasOwnProperty(m)){var g="scale"===m?"1":"0";r.transform+=v[m].replace(/undefined/g,g)}}return r}e.__esModule=!0,e.default=r;var o=n(0),i=n(8),a=function(t){return t&&t.__esModule?t:{default:t}}(i),s=1e-4},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5);e.default={fill:r.color,stroke:r.color,scale:r.scale,scaleX:r.scale,scaleY:r.scale,opacity:r.alpha,fillOpacity:r.alpha,strokeOpacity:r.alpha}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t,e){return new h(s({element:t},e))};var u=n(7),c=r(u),f=n(35),l=r(f),p=n(0),h=function(t){function e(n){o(this,e);var r=i(this,t.call(this,n)),a=n.element.getBBox(),s=a.x,u=a.y,c=a.width,f=a.height;return r.elementDimensions={x:s,y:u,width:c,height:f,pathLength:n.element.getTotalLength()},r}return a(e,t),e.prototype.onRender=function(){var t=this.elementDimensions.pathLength,e=this.props.element;(0,p.setDOMAttrs)(e,(0,l.default)(this.state,t))},e.prototype.onRead=function(t){return this.props.element.getAttribute(t)},e}(c.default)},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t,e){return parseFloat(t)/100*e+"px"};e.default=function(t,e){var n={},o={length:"0",spacing:e+"px"},i=!1;for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];switch(a){case"length":case"spacing":i=!0,o[a]=r(s,e);break;case"offset":n["stroke-dashoffset"]=r(-s,e);break;default:n[a]=s}}return i&&(n["stroke-dasharray"]=o.length+" "+o.spacing),n}},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(9),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),s=n(38),u=r(s),c=n(39),f=r(c),l=n(40),p=r(l),h=n(41),d=r(h),v=n(42),y=r(v);window.popmotionXL=o({},a,{draggable:u.default,inertia:f.default,scroll:p.default,spinnable:d.default,timeline:y.default})},function(t,e,n){"use strict";function r(t){function e(t){var e=(0,o.pointer)(t).start();a&&(0,o.trackOffset)(e.x,{from:g.x.get(),onUpdate:g.x}).start(),u&&(0,o.trackOffset)(e.y,{from:g.y.get(),onUpdate:g.y,onStop:function(){return e.stop()}}).start(),d&&d(g)}function n(){g.stop(),v&&v(g)}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.x,a=void 0===i||i,s=r.y,u=void 0===s||s,c=r.initialX,f=void 0===c?0:c,l=r.initialY,p=void 0===l?0:l,h=r.onDrag,d=r.onDragStart,v=r.onDragStop,y=(0,o.css)(t),m={};a&&(m.x=(0,o.value)(f,function(t){return y.set("x",t)})),u&&(m.y=(0,o.value)(p,function(t){return y.set("y",t)}));var g=(0,o.composite)(m,{onUpdate:h});return t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!1}),document.addEventListener("mouseup",n),document.addEventListener("touchend",n),g}e.__esModule=!0,e.default=r;var o=n(9)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(9),s=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.onStart=function(){var t=this.props,e=t.velocity,n=t.power,r=t.modifyTarget;this.amplitude=n*e,this.target=Math.round(this.current+this.amplitude),this.elapsed=0,r&&(this.target=r(this.target))},e.prototype.update=function(){var t=this.props,e=t.autoStopDelta,n=t.timeConstant;this.elapsed+=(0,a.timeSinceLastFrame)();var r=-this.amplitude*Math.exp(-this.elapsed/n),o=r>e||r<-e;return o||(this.isComplete=!0),o?this.target+r:this.target},e.prototype.isActionComplete=function(){return this.isComplete},e}(a.Action);s.defaultProps={velocity:0,from:0,power:.8,timeConstant:350,autoStopDelta:.5},e.default=function(t){return new s(t)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(9),s=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.get=function(e){return this.state[e]=void 0,t.prototype.get.call(this,e)},e}(a.Renderer),u=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.onRender=function(){var t=this.props.element,e=this.state,n=e.top,r=e.left;t.scrollLeft=r,t.scrollTop=n},e.prototype.onRead=function(){var t=arguments.length<=0||void 0===arguments[0]?"top":arguments[0],e=this.props.element;return"top"===t?e.scrollTop:e.scrollLeft},e}(s),c=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.onRender=function(){var t=this.state,e=t.top,n=t.left;void 0!==typeof window&&window.scrollTo(n,e)},e.prototype.onRead=function(t){return void 0===typeof window?0:"top"===t?window.pageYOffset:window.pageXOffset},e}(s);e.default=function(t){return t?new u({element:t}):new c}},function(t,e,n){"use strict";function r(t,e){function n(e){e.preventDefault();var n=(0,o.pointer)(e,{transform:function(e){var n=t.getBoundingClientRect(),r={x:n.left+n.width/2,y:n.top+n.height/2};return i(r,e)}}).start();(0,o.trackOffset)(n,{from:h.get(),onUpdate:h,onStop:function(){return n.stop()}}).start()}function r(){(0,o.physics)({from:h.get(),velocity:h.getVelocity(),friction:c,onUpdate:h}).start()}var a=e.initialRotation,s=void 0===a?0:a,u=e.friction,c=void 0===u?.4:u,f=e.transformSpin,l=e.onSpin,p=(0,o.css)(t),h=(0,o.value)(s,function(t){var e=f?f(t):t;l&&l(e),p.set("rotate",e)});return t.addEventListener("mousedown",n),t.addEventListener("touchstart",n,{passive:!1}),document.addEventListener("mouseup",r),document.addEventListener("touchend",r),h}e.__esModule=!0,e.default=r;var o=n(9),i=o.calc.angle},function(t,e,n){"use strict";function r(t,e){if(e.constructor===Array){var n=e[e.length-1],r="number"==typeof n,o=r?e.slice(0,-1):e,i=o.length,a=0;o.forEach(function(e,o){if(t.push(e),o!==i-1){var s=e.getProp("duration");a+=r?n:0,t.push("-"+(s-a))}})}else t.push(e);return t}function o(t,e){var n=0,o=0,c=t.reduce(r,[]).reduce(function(t,e){var r=void 0===e?"undefined":a(e);if("string"===r)n+=parseFloat(e);else if("number"===r)n=e;else{var i=n+e.getProp("duration");t.push({tween:e,from:n,to:i}),n=i,o=Math.max(o,i)}return t},[]).reduce(function(t,e){var n=e.tween.getProp("onUpdate"),r=t.targets.indexOf(n);return-1===r&&(t.targets.push(n),t.fragments.push([]),r=t.fragments.length-1),t.fragments[r].push({tween:e.tween,from:u(0,o,e.from),to:u(0,o,e.to)}),n.get&&(t.initialValues[r]=n.get()),t},{initialValues:[],targets:[],fragments:[]}),l=c.fragments.length;return(0,s.tween)(i({duration:o,ease:s.easing.linear},e,{onUpdate:function(t){for(var e=0;e<l;e++){for(var n=c.fragments[e],r=n.length,o=!1,i=1/0,a=0,s=0,p=!1,h=0;!o&&h<r;){var d=n[h],v=u(d.from,d.to,t);if(v>=0&&v<=1)o=!0,d.tween.seek(v);else if(v>1){p=!0;var y=v<0?Math.abs(v):v-1;y<i&&(i=y,s=f(v),a=h)}h++}if(!o){var m=c.targets[e];p||!m.set?n[a].tween.progress!==s&&n[a].tween.seek(s):!p&&m.set&&m.get()!==c.initialValues[e]&&m.set(c.initialValues[e])}}}}))}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=o;var s=n(9),u=s.calc.getProgressFromValue,c=s.transform.clamp,f=c(0,1)}]);
  </script>
  <script>
/*
 *  TODO:
 * Center SVG Text properly (what if 1 word?)
 * Cluster our markers: https://github.com/mapbox/mapbox-gl-js/issues/4491
 * Do something sweet on Click
*/

// Import all of the nice things from Popmotion 
// https://popmotion.io/
const { svg, css, timeline, physics, chain, delay, tween, easing } = window.popmotionXL;

const markers = [];

//  HELPERS
// Get TranslateXY values of added object, returns array `[x, y]`
// https://stackoverflow.com/questions/21912684/how-to-get-value-of-translatex-and-translatey
function getComputedTranslateXY(obj) {
    const transArr = [];
    if (!window.getComputedStyle) return;
    const style = getComputedStyle(obj),
        transform = style.transform || style.webkitTransform || style.mozTransform;
    let mat = transform.match(/^matrix3d\((.+)\)$/);
    if (mat) return parseFloat(mat[1].split(', ')[13]);
    mat = transform.match(/^matrix\((.+)\)$/);
    mat ? transArr.push(parseFloat(mat[1].split(', ')[4])) : 0;
    mat ? transArr.push(parseFloat(mat[1].split(', ')[5])) : 0;
    return transArr;
}

// Get X and Y Width of window
function getWindowXYSize() {
    const windowXY = [];
    const w = window;
    const d = document;
    const e = d.documentElement;
    const g = d.getElementsByTagName('body')[0];
    const x = w.innerWidth || e.clientWidth || g.clientWidth;
    const y = w.innerHeight || e.clientHeight || g.clientHeight;
    windowXY.push(x, y)
    return windowXY;
}

//  ICONS
const iconCity = `
    <path class="e-marker__icon e-marker__icon--city" d="M41.1,68.7V58.5L36,53.4l-5.1,5.1v3.4H20.8v23.7h30.5V68.7H41.1z M27.5,82.2h-3.4v-3.4h3.4V82.2z M27.5,75.4h-3.4
	V72h3.4V75.4z M27.5,68.7h-3.4v-3.4h3.4V68.7z M37.7,82.2h-3.4v-3.4h3.4V82.2z M37.7,75.4h-3.4V72h3.4V75.4z M37.7,68.7h-3.4v-3.4
	h3.4V68.7z M37.7,61.9h-3.4v-3.4h3.4V61.9z M47.9,82.2h-3.4v-3.4h3.4V82.2z M47.9,75.4h-3.4V72h3.4V75.4z"/>
`;

const iconBeach = `
    <path class="e-marker__icon e-marker__icon--beach" d="M38.3,74.8l2.9-2.9L54,84.8l-2.9,2.9L38.3,74.8z M46.8,63.3l5.7-5.7c-7.9-7.9-20.7-7.9-28.6,0C31.8,55,40.6,57.1,46.8,63.3z
     M23.9,57.6c-7.9,7.9-7.9,20.7,0,28.6l5.7-5.7C23.4,74.2,21.3,65.5,23.9,57.6z M23.9,57.6L23.9,57.6c-0.8,6,2.3,13.8,8.6,20.1
    L44,66.2C37.7,59.9,30,56.8,23.9,57.6z"/>
`;

const iconMountain = `
    <path class="e-marker__icon e-marker__icon--mountain" d="M39.5,58.8l-6.6,8.8l5,6.7l-2.8,2.1c-3-3.9-7.9-10.5-7.9-10.5l-10.5,14h38.6L39.5,58.8z"/>
`;

const iconJungle = `
    <g class="e-marker__icon e-marker__icon--jungle">
	    <path d="M50.1,81.9c-1.7-2.8-2.8-6.1-5.6-8c1.6-0.2,3.2,0.1,4.6-0.5c2.3-0.9,3.2-3.9,2.7-6.3c-0.5-2.5-2.1-4.5-3.7-6.5
		c-0.8-1.1-1.6-2.1-2.5-3.2c-1.3,2.9,0.1,6.6-1.4,9.4c-0.3,0.5-0.8,1-1.4,0.8c-0.6-0.3-0.3-1.3,0-1.9c1.4-2.5,1.8-5.6,1.3-8.4
		c-0.1-0.5-0.3-1.1-0.6-1.5c-0.3-0.4-0.8-0.7-1.3-0.9c-1.5-0.8-3.1-1.3-4.8-1.6c1.3,1.6,1.6,3.9,1.8,6c0.2,1.7,0.3,3.7-0.9,4.9
		c-0.6-0.3-1.1-0.9-1.1-1.6c-0.1-0.7,0-1.4,0.1-2.1c0.3-2,0.3-4.2-0.9-5.9c-1.5-2.4-5.1-3.1-7.5-1.5c1.9,1.6,3.3,3.8,3.9,6.2
		c0.1,0.6,0.1,1.6-0.6,1.6c-0.6,0.1-0.9-0.6-1.2-1.1c-0.6-1.5-1.1-3-1.7-4.4c-0.3-0.6-0.5-1.3-1.1-1.8c-1.3-0.9-3-0.1-4.5,0.3
		C23,54,22,53.9,21.2,53.7c0.7,1.6,0.8,3.5,0.4,5.3c-0.3,0.9-0.6,1.8-0.8,2.8c-0.2,0.9-0.1,2,0.5,2.8c0.8,1,2.3,1.1,3.7,0.9
		c2.6-0.3,5.3-1.1,7.7-0.4c-0.3,0.9-1.1,1.5-2,1.8c-3.5,1.6-7.8,1.8-11.5,0.4c1.3,0.7,2.8,1.4,3.5,2.8c0.3,0.6,0.4,1.3,0.8,1.9
		c0.5,0.9,1.5,1.5,2,2.4c0.4,0.6,0.6,1.3,0.9,2c0.4,0.6,0.9,1.3,1.6,1.3c0.5,0.1,0.9-0.2,1.4-0.4c2.3-1,4.7-1.8,7.2-2.5
		c0.6-0.2,1.5-0.3,1.8,0.4c-0.1,0.5-0.6,0.8-1.1,1.1c-2.7,1.3-5.5,2.3-8.4,3.1c1.8,1.3,3.7,2.5,5.8,3.3c2.1,0.8,4.5,0.9,6.5-0.1
		c2.6-1.2,4.2-4.2,3.7-7c1.7,1.6,2.8,3.8,3.9,5.9c1.1,2.1,2.2,4.1,3.2,6.2c0.2-0.4,0.4-0.7,0.6-1.1C52,85.1,51,83.4,50.1,81.9z
		 M33.2,71.4c-0.5,0.3-1.1,0.4-1.6,0.6c-0.8,0.2-1.5,0.3-2.3,0.3c1.6-0.7,3.2-1.3,4.8-1.9h-0.1c0.1-0.1,0.3,0,0.4,0.1
		C34.2,71,33.7,71.2,33.2,71.4z"/>
    </g>
`;

//  DATA
const geojson = {
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "properties": {
                "title": "Boat Waves, Liljeholmen",
                "imageUrl": "https://c1.staticflickr.com/5/4241/35467523155_346b08810f_q.jpg",
                "type": "city",
                "iconSize": [60, 60]
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    18.0386022453215, 59.30955534434911
                ]
            }
        },
    ]
};

//  CREATE GLORIOUS MARKERS
function renderMarker(marker) {
    const { title, imageUrl, type } = marker.properties;
    const titleArr = title.split(' ');
    const titleLast = titleArr.slice(Math.ceil(titleArr.length / 2), titleArr.length);
    const titleFirst = titleArr.slice(0, Math.ceil(titleArr.length / 2));
    let currentIcon = '';

    switch (type) {
        case 'beach':
            currentIcon = iconBeach;
            break;
        case 'city':
            currentIcon = iconCity;
            break;
        case 'mountain':
            currentIcon = iconMountain;
            break;
        case 'jungle':
            currentIcon = iconJungle;
            break;
        default:
            currentIcon = '';
    };

    return `
        <div>
            <svg class="e-marker" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 72 130.7" width="36">
                <defs>
                    <clipPath id="circle">
                        <path d="M36,97.4c15,0,27.3-12.2,27.3-27.3c0-15-12.2-27.3-27.3-27.3S8.7,55.1,8.7,70.2S21,97.4,36,97.4z"/>
                    </clipPath>
                </defs>
                <path class="e-marker__marker" d="M60.7,45.4C54.1,38.8,45.3,35.2,36,35.2c-9.3,0-18.1,3.6-24.7,10.3C4.6,52,1,60.8,1,70.2c0,6.3,1.5,11.6,4.6,16.7
      C8.4,91.3,12.1,95,16,98.9c7.3,7.2,15.5,15.4,19,30.5c0.1,0.5,0.5,0.8,1,0.8s0.9-0.3,1-0.8c3.5-15.1,11.7-23.3,19-30.5
      c3.9-3.9,7.6-7.6,10.4-12.1c3.1-5.1,4.6-10.3,4.6-16.7C71,60.8,67.4,52,60.7,45.4z M36,97.4c-15,0-27.3-12.2-27.3-27.3
      S21,42.9,36,42.9c15,0,27.3,12.2,27.3,27.3C63.3,85.2,51,97.4,36,97.4z"/>
          <path class="e-marker__circle" d="M36,97.4c15,0,27.3-12.2,27.3-27.3c0-15-12.2-27.3-27.3-27.3S8.7,55.1,8.7,70.2S21,97.4,36,97.4z"/>
                ${currentIcon}
                <image class="e-marker__image" width="100%" height="100%" clip-path="url(#circle)" xlink:href="${imageUrl}" />
                <text class="e-marker__text" transform="matrix(1 0 0 1 0 13.9998)">
                    <tspan x="50%" y="0" >${titleFirst.join(' ')}</tspan>
                    <tspan x="50%" y="13" >${titleLast.join(' ')}</tspan>      
                </text>
            </svg>
        </div>
    `;
}

//  Offset the map when a marker is too close to the edge for all sides but the bottom
function offSetMarker(marker, markerGrowSize, map) {
    // Set the max width and height of the marker and shrink it a bit by multiplying with 0.x. This is to compensate for padding around the marker
    const markerMaxWidth = (marker.offsetWidth * markerGrowSize) * 0.55;
    const markerMaxHeight = (marker.offsetHeight * markerGrowSize) * 0.7;
    const markerOffSetX = getComputedTranslateXY(marker)[0];
    const markerOffSetY = getComputedTranslateXY(marker)[1];
    if (
        markerOffSetY < markerMaxHeight
        || markerOffSetX < markerMaxWidth
        || (getWindowXYSize()[0] - markerOffSetX) < (markerMaxWidth + marker.offsetWidth)
    ) {
        let offSetY = 0;
        let offSetX = 0;

        if (markerOffSetY < markerMaxHeight) {
            offSetY = markerOffSetY - markerMaxHeight;
        }

        if (markerOffSetX < markerMaxWidth) {
            offSetX = markerOffSetX - markerMaxWidth;
        }
        // Add `marker.offsetWidth` to this calculation because the position is calculated from top-left
        if ((getWindowXYSize()[0] - markerOffSetX) < (markerMaxWidth + marker.offsetWidth)) {
            offSetX = (markerMaxWidth + marker.offsetWidth) - (getWindowXYSize()[0] - markerOffSetX);
        }

        map.panBy([offSetX, offSetY]);
    }
}

//  MAP
function initMap(map) {
    const bounds = new mapboxgl.LngLatBounds();

    // ADD MARKERS TO MAP
    geojson.features.forEach((marker) => {
        const svgMarker = renderMarker(marker);
        // To get an actual DOM node instead of a string we append our marker to a dummy element and query it again with 'firstchild'. This way we retrieve a normal DOM node
        const placeholder = document.createElement('div');
        placeholder.innerHTML = svgMarker;
        const el = placeholder.firstChild;

        el.nextSibling.addEventListener('click', () => {
            map.flyTo({
                center: marker.geometry.coordinates,
                zoom: 11,
            });
        });

        // Extend bounds with marker coordinates
        bounds.extend(marker.geometry.coordinates);

        markers.push(el.nextSibling);

        new mapboxgl.Marker(el.nextSibling, { offset: [0, -10] })
            .setLngLat(marker.geometry.coordinates)
            .addTo(map);
    });

    map.on('load', (e) => {
        setTimeout(() => {
            map.fitBounds(bounds, {
                padding: { top: 50, bottom: 50, left: 50, right: 50 },
                easing(t) {
                    return t * (2 - t);
                },
            });
        }, 300);
    });

    markers.forEach((marker) => {
        const markerSVG = marker.querySelector('svg');
        const markerIcon = marker.querySelector('.e-marker__icon');
        const markerImage = marker.querySelector('.e-marker__image');
        const markerText = marker.querySelector('.e-marker__text');

        const markerRenderer = css(markerSVG, { enableHardwareAcceleration: false });
        const iconRenderer = svg(markerIcon);
        const imageRenderer = css(markerImage);
        const textRenderer = css(markerText);

        const markerGrowSize = 2;

        const markerScale = physics({
            from: 1,
            to: markerGrowSize,
            velocity: 20,
            spring: 300,
            friction: 0.8,
            onUpdate: (x) => markerRenderer.set('scale', x),
        });

        const iconScale = tween({
            from: 1,
            to: 0,
            duration: 300,
            ease: easing.backIn,
            onUpdate: (x) => iconRenderer.set('scale', x),
        });

        const imageScale = tween({
            from: 0,
            to: 1,
            duration: 300,
            ease: easing.backOut,
            onUpdate: (x) => imageRenderer.set('scale', x),
        });

        const textToggle = tween({
            from: 0,
            to: 1,
            duration: 300,
            ease: easing.backOut,
            onUpdate: (x) => textRenderer.set('opacity', x),
        });

        const hoverTimeline = timeline([
            iconScale,
            '0',
            imageScale,
            '-100',
            textToggle,
        ]);

        marker.addEventListener('mouseenter', () => {
            offSetMarker(marker, markerGrowSize, map);
            markerScale.props.from = 1;
            markerScale.props.to = markerGrowSize;
            imageScale.props.playDirection = 1;
            iconScale.props.playDirection = 1;
            hoverTimeline.props.playDirection = 1;
            textToggle.props.playDirection = 1;
            markerScale.start();
            hoverTimeline.start();
        });

        marker.addEventListener('mouseleave', () => {
            markerScale.props.from = markerGrowSize;
            markerScale.props.to = 1;
            hoverTimeline.reverse();
            hoverTimeline.start();
            markerScale.start();
        });

    });
}

//  Fetch Map Style data - Vector tiles hosted by OpenMapTiles.com
// If you fork or copy this mapbox, pretty pleae create your own *FREE* API key on maptiler.com
const initMapbox = async () => {
    const response = await fetch('https://api.maptiler.com/maps/hybrid/style.json?key=5Z24zDQGZUDhFSYI5DhH');
    try {
        if (!response.ok) throw Error(response.statusText);
        const style = await response.json();
        const map = new mapboxgl.Map({
            container: 'map',
            style: style,
            zoom: 2,
            center: [15.173701797748015, 60.61859909845575],
        });
        initMap(map);
    } catch (error) {
        console.error({ error });
        const errorWrap = document.createElement("div");
        errorWrap.innerHTML = "";
        document.body.appendChild(errorWrap);
    }
}

initMapbox();
  </script>
</html>
